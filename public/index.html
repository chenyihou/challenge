<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        header {
			display: flex;
			align-items: center;
			justify-content: center;
			background: linear-gradient(to right, #1d5890, #23975e);
			text-align: center;
			color: white;
			font-size: 2rem; 	
			font-weight: 999;
			height: 15vh;		
		}
		.search {
			display: flex;
			margin:1rem;
		}
		#searchInput{
			flex: 1;
			font-size: 1.5rem;

		}
		#searchIcon{
			padding: 0.5rem;
			margin-left: 1rem;
			background: green;
			fill: white;
		}
		.result{
			display: flex;
			flex-direction: row;
			justify-content: space-between;
		}
		.right{
			align-self: flex-end;
			width: 50%;
		}
		.left{
			align-self: flex-start;
			flex: 1;
			width: 70vw;
		}
	</style>
</head>

<body>
    <header>Toronto Waste Lookup</header>
    <div class="search"><input id="searchInput" type="text" placeholder="search"><svg t="1546920010445" id="searchIcon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4492" xmlns:xlink="http://www.w3.org/1999/xlink" width="2rem" height="2rem">
            <defs>
                <style type="text/css"></style>
            </defs>
            <path d="M672 64C513.28 64 384 193.28 384 352a284.8 284.8 0 0 0 64 178.752L129.472 849.28l45.056 45.44L493.248 576c49.28 39.488 110.976 64 178.752 64 158.72 0 288-129.28 288-288S830.72 64 672 64z m0 64C796.032 128 896 228.032 896 352 896 476.032 795.968 576 672 576A223.616 223.616 0 0 1 448 352C448 227.968 548.032 128 672 128z" fill="" p-id="4493"></path>
        </svg></div>
    <main id="result"></main>
    <script>
    const searchInput = document.querySelector('#searchInput')
    const searchIcon = document.querySelector('#searchIcon')
    const result = document.querySelector('#result')

    let list=[]

    const createResult=(title,body)=>{
    	let wrapper=document.createElement('div')
    	wrapper.classList.add("result")

    	let left=document.createElement('div')
    	wrapper.classList.add("left")
    	left.innerHTML=title

    	let right=document.createElement('div')
    	wrapper.classList.add("right")
    	right.innerHTML=body
    	right.innerHTML=right.innerText

    	wrapper.appendChild(left)
    	wrapper.appendChild(right)
    	result.appendChild(wrapper)
 

    }

    const onchangeHandler = e => {
        if (!e.target.value) {
            result.innerHTML = ''
        }

    }
    const clickHandler = e => {
    	const {value} =searchInput
    	if(!value) return
        fetch(`http://localhost:8000/api?search=${value}`)
            .then(function(response) {
                return response.json();
            })
            .then(function(myJson) {
                myJson.ret.forEach(item=>{
                	createResult(item.title,item.body)
                })
            });
    }
    searchInput.addEventListener('input', onchangeHandler)
    searchIcon.addEventListener('click', clickHandler)
    </script>
</body>

</html>